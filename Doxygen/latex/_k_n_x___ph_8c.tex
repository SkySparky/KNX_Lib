\hypertarget{_k_n_x___ph_8c}{}\section{K\+N\+X\+\_\+\+Ph/\+Src/\+K\+N\+X\+\_\+\+Ph.c File Reference}
\label{_k_n_x___ph_8c}\index{K\+N\+X\+\_\+\+Ph/\+Src/\+K\+N\+X\+\_\+\+Ph.\+c@{K\+N\+X\+\_\+\+Ph/\+Src/\+K\+N\+X\+\_\+\+Ph.\+c}}


K\+NX Physical Layer supervisor. This file provides functions to manage following functionalities\+:  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}K\+N\+X\+\_\+\+Ph.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}K\+N\+X\+\_\+\+Ph\+\_\+\+Aux.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}K\+N\+X\+\_\+\+Ph\+\_\+\+T\+P\+Uart.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}cola.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group___k_n_x___p_h___sup___private___variables_ga4337350e8fd2ce76fcfc8a820acff39e}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+T\+A\+T\+E\+\_\+\+D\+E\+B\+U\+G\+M\+S\+G\+\_\+\+I\+N\+D\+I\+CE}~((uint8\+\_\+t)32)
\begin{DoxyCompactList}\small\item\em \hyperlink{group___k_n_x___p_h___sup___private___variables_gaa18f29dc3cf5b41ce81bcf264601d400}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+T\+A\+T\+E\+\_\+\+D\+E\+B\+U\+G\+M\+SG} digits indice. \end{DoxyCompactList}\item 
\#define \hyperlink{group___k_n_x___p_h___sup___private___variables_gad1f9e6675f34456d40cf7c08b9bd305f}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+E\+N\+D\+\_\+\+D\+E\+B\+U\+G\+M\+S\+G\+\_\+\+I\+N\+D\+I\+CE}~((uint8\+\_\+t)23)
\begin{DoxyCompactList}\small\item\em \hyperlink{group___k_n_x___p_h___sup___private___variables_ga16f43b8d36bcc39b90564fac102ac721}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+E\+N\+D\+\_\+\+D\+E\+B\+U\+G\+M\+SG} digits indice. \end{DoxyCompactList}\item 
\#define \hyperlink{group___k_n_x___p_h___sup___private___variables_gacc017b9a5b70a1082a3713dbc43ac62c}{K\+N\+X\+\_\+\+P\+H\+\_\+\+R\+E\+C\+E\+I\+V\+E\+\_\+\+D\+E\+B\+U\+G\+M\+S\+G\+\_\+\+I\+N\+D\+I\+CE}~((uint8\+\_\+t)27)
\begin{DoxyCompactList}\small\item\em \hyperlink{group___k_n_x___p_h___sup___private___variables_ga29eb5f6a2e306cf5545c5a6af4623e35}{K\+N\+X\+\_\+\+P\+H\+\_\+\+R\+E\+C\+E\+I\+V\+E\+\_\+\+D\+E\+B\+U\+G\+M\+SG} digits indice. \end{DoxyCompactList}\item 
\#define \hyperlink{group___k_n_x___p_h___sup___private___variables_ga3901497762df9a18c2051bab3ca7b86c}{K\+N\+X\+\_\+\+P\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+D\+E\+B\+U\+G\+M\+S\+G\+\_\+\+I\+N\+D\+I\+CE}~((uint8\+\_\+t)22)
\begin{DoxyCompactList}\small\item\em \hyperlink{group___k_n_x___p_h___sup___private___variables_ga598da98824813e3e2781a39bb3f90bfd}{K\+N\+X\+\_\+\+P\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+D\+E\+B\+U\+G\+M\+SG} digits indice. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___private___functions_gaa1d7c7761cb6971931395ef1fb9dfe59}{request2data} (\hyperlink{group___k_n_x___p_h___sup___exported___types_ga78f5bed722457f025cbc6786d5730d3e}{P\+H\+\_\+\+Request\+\_\+t} request)
\begin{DoxyCompactList}\small\item\em Convert a request to a data. \end{DoxyCompactList}\item 
static void \hyperlink{group___k_n_x___p_h___sup___private___functions_ga8253bed4aa2e3d7bfa9c1de3604668e0}{K\+N\+X\+\_\+\+Ph\+\_\+\+Set\+State} (\hyperlink{group___k_n_x___p_h___sup___exported___types_ga5b665a94bef912fbfbea7cc949ed0e49}{P\+H\+\_\+\+Status\+\_\+t} state)
\begin{DoxyCompactList}\small\item\em Set the status of Physical layer. \end{DoxyCompactList}\item 
static void \hyperlink{group___k_n_x___p_h___sup___private___functions_gaad432d8797e22b886ab169401decc3dd}{K\+N\+X\+\_\+\+Ph\+\_\+\+Debug\+Message} (uint8\+\_\+t data, \hyperlink{group___debug___exported___types_gacb1775677105967978fae4d9155cca26}{D\+E\+B\+U\+G\+\_\+\+Type\+\_\+t} type)
\begin{DoxyCompactList}\small\item\em Send the debug message to indicate the change of the state. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group1_ga2139e336141090cdd97ecb0c5e55499f}{K\+N\+X\+\_\+\+Ph\+\_\+\+Init} (void)
\begin{DoxyCompactList}\small\item\em Initialize the \hyperlink{group___k_n_x___p_h}{K\+NX Physical Layer} module. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group2_gad47b9ae30f2704001cf07d31da372fe2}{K\+N\+X\+\_\+\+Ph\+\_\+\+Send} (\hyperlink{group___k_n_x___p_h___sup___exported___types_ga78f5bed722457f025cbc6786d5730d3e}{P\+H\+\_\+\+Request\+\_\+t} request, uint32\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Send a request. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group2_ga5c5b1af8b0ba06771d5b16fee4547f87}{K\+N\+X\+\_\+\+Ph\+\_\+\+Wait\+For} (uint8\+\_\+t res, uint32\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Wait for a response with timeout. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group2_ga4bede9df3610d29290973ac067ac93ae}{K\+N\+X\+\_\+\+Ph\+\_\+\+Wait\+For\+With\+Mask} (uint8\+\_\+t $\ast$res, uint8\+\_\+t res\+Mask, uint32\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Wait for a type of response with mask and timeout. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group3_ga5f33d05301997e2288af4c4e50391548}{K\+N\+X\+\_\+\+Ph\+\_\+\+Reset\+\_\+request} (void)
\begin{DoxyCompactList}\small\item\em Request to reset the \hyperlink{group___k_n_x___p_h}{K\+NX Physical Layer} module and waiting for the \hyperlink{group___u_a_r_t___control___from_gade9c58399a01abdaa03bbecbf63879c3}{Reset\+\_\+indication}. \end{DoxyCompactList}\item 
uint8\+\_\+t \hyperlink{group___k_n_x___p_h___sup___exported___functions___group3_ga54c0cf8cfcfc3366ec286ad92a336be0}{K\+N\+X\+\_\+\+Ph\+\_\+\+State\+\_\+request} (void)
\begin{DoxyCompactList}\small\item\em Requests the internal communication state from the T\+P-\/\+U\+A\+R\+T-\/\+IC and waiting for the \hyperlink{group___u_a_r_t___control___from_ga736e177182335771d7948dd74a7a1a5f}{State\+\_\+indication}. \end{DoxyCompactList}\item 
\hyperlink{group___k_n_x___p_h___sup___exported___types_ga5b665a94bef912fbfbea7cc949ed0e49}{P\+H\+\_\+\+Status\+\_\+t} \hyperlink{group___k_n_x___p_h___sup___exported___functions___group4_ga8f380db7e1c156190263c4860f2d3ded}{K\+N\+X\+\_\+\+Ph\+\_\+\+Get\+State} (void)
\begin{DoxyCompactList}\small\item\em Getter of the status of the physical layer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{group___k_n_x___p_h___sup___exported___types_ga5b665a94bef912fbfbea7cc949ed0e49}{P\+H\+\_\+\+Status\+\_\+t} \hyperlink{group___k_n_x___p_h___sup___private___variables_gaed45956ede9586539568adc9994c6dfb}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+T\+A\+TE}
\begin{DoxyCompactList}\small\item\em Current state of K\+NX physical layer. \end{DoxyCompactList}\item 
static unsigned char \hyperlink{group___k_n_x___p_h___sup___private___variables_gaa18f29dc3cf5b41ce81bcf264601d400}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+T\+A\+T\+E\+\_\+\+D\+E\+B\+U\+G\+M\+SG} \mbox{[}$\,$\mbox{]} = \char`\"{}\mbox{[}K\+NX PH\mbox{]}\hyperlink{group___k_n_x___p_h___sup___private___variables_gaed45956ede9586539568adc9994c6dfb}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+T\+A\+TE} changed to X\+X.\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em State Debug message sent in \hyperlink{group___cola___debug}{Cola Debug}. \end{DoxyCompactList}\item 
static unsigned char \hyperlink{group___k_n_x___p_h___sup___private___variables_ga16f43b8d36bcc39b90564fac102ac721}{K\+N\+X\+\_\+\+P\+H\+\_\+\+S\+E\+N\+D\+\_\+\+D\+E\+B\+U\+G\+M\+SG} \mbox{[}$\,$\mbox{]} = \char`\"{}\mbox{[}K\+NX PH\mbox{]}Message sent\+: /XX/\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Sending Debug message sent in \hyperlink{group___cola___debug}{Cola Debug}. \end{DoxyCompactList}\item 
static unsigned char \hyperlink{group___k_n_x___p_h___sup___private___variables_ga29eb5f6a2e306cf5545c5a6af4623e35}{K\+N\+X\+\_\+\+P\+H\+\_\+\+R\+E\+C\+E\+I\+V\+E\+\_\+\+D\+E\+B\+U\+G\+M\+SG} \mbox{[}$\,$\mbox{]} = \char`\"{}\mbox{[}K\+NX PH\mbox{]}Message received\+: \mbox{[}XX\mbox{]}\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Receiving Debug message sent in \hyperlink{group___cola___debug}{Cola Debug}. \end{DoxyCompactList}\item 
static unsigned char \hyperlink{group___k_n_x___p_h___sup___private___variables_ga598da98824813e3e2781a39bb3f90bfd}{K\+N\+X\+\_\+\+P\+H\+\_\+\+E\+R\+R\+O\+R\+\_\+\+D\+E\+B\+U\+G\+M\+SG} \mbox{[}$\,$\mbox{]} = \char`\"{}\mbox{[}K\+NX PH\mbox{]}Error code\+: 0x\+X\+X\textbackslash{}r\textbackslash{}n\char`\"{}
\begin{DoxyCompactList}\small\item\em Error Debug message sent in \hyperlink{group___cola___debug}{Cola Debug}. \end{DoxyCompactList}\item 
\hyperlink{structt__cola}{t\+\_\+cola} \hyperlink{group___k_n_x___p_h___sup___private___variables_ga314fd637d927bd6a2551e119de623aa5}{cola\+Debug}
\begin{DoxyCompactList}\small\item\em Cola defined in \hyperlink{group___debug}{Debug}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
K\+NX Physical Layer supervisor. This file provides functions to manage following functionalities\+: 

\begin{DoxyAuthor}{Author}
MA Dingjie 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\+0.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
6-\/\+September-\/2016
\begin{DoxyItemize}
\item Initialization functions
\item Send and Receive messages functions
\item Several basic services
\item State functions 
\end{DoxyItemize}
\end{DoxyDate}
